<!DOCTYPE html> 
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fracciones Equivalentes</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #ffffff;
      color: black;
      text-align: center;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      box-sizing: border-box
    }

    .wrapper {
     display: inline-block;
     padding: 10px;
     border: 1px solid #ccc;
     box-sizing: border-box;
    }

    .table-container {
      position: relative;
      display: flex;
      justify-content: center;
      gap: 190px; /* aseparacion entre columnas */
      margin-top: 20px;
    }

    table {
      border-collapse: collapse;
    }

    th {
      display: none;
    }

    td {
      width: 100px;
      height: 75px;
      background-color: rgb(252, 252, 251);
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 24px;
      text-align: center;
      vertical-align: middle;
      cursor: pointer;
      user-select: none;
      position: relative;
    }

    td.selected {
      border: 2px solid yellow;
    }

    #verify {
      margin-top: 10px;
      padding: 5px 10px;
      background-color: #0989a8;
      color: white;
      font-size: 24px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    #mensaje {
      margin-top: 5px;
      font-size: 18px;
      font-weight: bold;
    }

    svg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }
  </style>
</head>
<body>

  <div class="wrapper">
    <div class="table-container">
      <svg id="lines"></svg>

      <table id="colA">
        <tr><td id="A1">18/30</td></tr>
        <tr><td id="A2">2/7</td></tr>
        <tr><td id="A3">6/8</td></tr>
        <tr><td id="A4">1/2</td></tr>
      </table>

      <table id="colB">
        <tr><td id="B1">5/10</td></tr>
        <tr><td id="B2">3/4</td></tr>
        <tr><td id="B3">10/35</td></tr>
        <tr><td id="B4">9/15</td></tr>
      </table>
    </div>

    <button id="verify" onclick="verificarRespuesta()">Verificar</button>
    <div id="mensaje"></div>
    <!-- üëá A√ëADE ESTE BOT√ìN AQU√ç -->
<button id="continuar" style="display: none;" onclick="irAGenially()">Continuar</button>
  </div>

  <script>
    let seleccionA = null;
    const emparejamientos = {};
    const svg = document.getElementById("lines");

    const celdasA = document.querySelectorAll("#colA td");
    const celdasB = document.querySelectorAll("#colB td");

    const colorCorrecto = "#4caf50";
    const colorIncorrecto = "#f44336";

    function limpiarSeleccion() {
      celdasA.forEach(c => c.classList.remove("selected"));
      celdasB.forEach(c => c.classList.remove("selected"));
    }

    function dibujarLinea(aId, bId, color) {
      borrarLinea(aId, bId);
      const a = document.getElementById(aId);
      const b = document.getElementById(bId);
      const svgRect = svg.getBoundingClientRect();
      const rectA = a.getBoundingClientRect();
      const rectB = b.getBoundingClientRect();

      const x1 = rectA.right - svgRect.left;
      const y1 = rectA.top + rectA.height / 2 - svgRect.top;
      const x2 = rectB.left - svgRect.left;
      const y2 = rectB.top + rectB.height / 2 - svgRect.top;

      const linea = document.createElementNS("http://www.w3.org/2000/svg", "line");
      linea.setAttribute("x1", x1);
      linea.setAttribute("y1", y1);
      linea.setAttribute("x2", x2);
      linea.setAttribute("y2", y2);
      linea.setAttribute("stroke", color);
      linea.setAttribute("stroke-width", "2");
      linea.setAttribute("data-a", aId);
      linea.setAttribute("data-b", bId);
      svg.appendChild(linea);
    }

    function borrarLinea(aId, bId) {
      const lineas = svg.querySelectorAll("line");
      lineas.forEach(l => {
        if (l.getAttribute("data-a") === aId && l.getAttribute("data-b") === bId) {
          l.remove();
        }
      });
    }

    celdasA.forEach(celda => {
      celda.addEventListener("click", () => {
        limpiarSeleccion();
        celda.classList.add("selected");
        seleccionA = celda;
      });

      celda.addEventListener("dblclick", () => {
        for (const b in emparejamientos) {
          if (emparejamientos[b].a === celda.id) {
            borrarLinea(celda.id, b);
            delete emparejamientos[b];
            limpiarSeleccion();
            break;
          }
        }
      });
    });

    celdasB.forEach(celda => {
      celda.addEventListener("click", () => {
        if (seleccionA) {
          if (emparejamientos[celda.id]) {
            borrarLinea(emparejamientos[celda.id].a, celda.id);
            delete emparejamientos[celda.id];
          }
          for (const b in emparejamientos) {
            if (emparejamientos[b].a === seleccionA.id) {
              borrarLinea(seleccionA.id, b);
              delete emparejamientos[b];
            }
          }

          emparejamientos[celda.id] = { a: seleccionA.id };
          dibujarLinea(seleccionA.id, celda.id, "gray");
          seleccionA = null;
          limpiarSeleccion();
        }
      });

      celda.addEventListener("dblclick", () => {
        if (emparejamientos[celda.id]) {
          borrarLinea(emparejamientos[celda.id].a, celda.id);
          delete emparejamientos[celda.id];
        }
      });
    });

    function verificarRespuesta() {
      const correctos = {
        B4: "A1",
        B3: "A2",
        B2: "A3",
        B1: "A4"
      };

      let todoBien = true;

      for (const [b, emp] of Object.entries(emparejamientos)) {
        if (correctos[b] === emp.a) {
          actualizarLineaColor(emp.a, b, colorCorrecto);
        } else {
          actualizarLineaColor(emp.a, b, colorIncorrecto);
          todoBien = false;
        }
      }

      if (Object.keys(emparejamientos).length !== 4) {
        todoBien = false;
      }

      const mensaje = document.getElementById("mensaje");
      mensaje.innerText = todoBien ? "¬°Correcto!" : "Algunas uniones son incorrectas.";
      mensaje.style.color = todoBien ? "limegreen" : "red";
      if (todoBien) {
      document.getElementById("continuar").style.display = "inline-block";
        }

    }

    function actualizarLineaColor(aId, bId, color) {
      const lineas = svg.querySelectorAll("line");
      lineas.forEach(l => {
        if (l.getAttribute("data-a") === aId && l.getAttribute("data-b") === bId) {
          l.setAttribute("stroke", color);
        }
      });
    }
    function irAGenially() {
  // Reemplaza esta URL con la URL de la p√°gina siguiente de tu Genially
  window.parent.location.href = "https://view.genially.com/68ea9faa5940cb38acfa8f83/interactive-content-ruleta-matematica/68ea9faa5940cb38acfa8f83";
}
  </script>

</body>
</html>
